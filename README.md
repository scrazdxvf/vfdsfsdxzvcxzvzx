# СКР БАРАХОЛКА - Руководство по настройке и запуску

Это веб-приложение представляет собой онлайн-маркетплейс, построенный с использованием React, TypeScript, Tailwind CSS и Firebase в качестве бэкенда.

## Начало работы

### Предпосылки

*   Node.js (версия 16.x или выше)
*   npm или Yarn
*   Аккаунт Google для доступа к Firebase

### 1. Клонирование репозитория (если применимо)

```bash
git clone <URL_РЕПОЗИТОРИЯ>
cd <НАЗВАНИЕ_ПАПКИ_ПРОЕКТА>
```

### 2. Установка зависимостей

Откройте терминал в корневой папке проекта и выполните:

```bash
npm install
# или
yarn install
```

### 3. Настройка Firebase

**3.1. Создайте проект Firebase:**

*   Перейдите на сайт [Firebase Console](https://console.firebase.google.com/).
*   Нажмите "Добавить проект" (Add project).
*   Следуйте инструкциям: введите название проекта (например, "skr-baraholka"), примите условия и создайте проект. Google Analytics можно включить или пропустить.

**3.2. Настройте сервисы Firebase в вашем проекте:**

*   **Authentication (Аутентификация):**
    *   В левом меню вашей Firebase консоли выберите "Authentication".
    *   Перейдите на вкладку "Sign-in method" (Способы входа).
    *   Включите провайдера "Email/Password" (Электронная почта/пароль).

*   **Firestore Database (База данных):**
    *   В левом меню выберите "Firestore Database".
    *   Нажмите "Создать базу данных" (Create database).
    *   Выберите **"Запустить в тестовом режиме" (Start in test mode)**. Это важно для начальной разработки.
        **ПОЗЖЕ ОБЯЗАТЕЛЬНО ЗАМЕНИТЕ ЭТИ ПРАВИЛА НА БОЛЕЕ БЕЗОПАСНЫЕ!** Примеры безопасных правил находятся в комментариях к файлу `src/App.tsx`.
    *   Выберите регион для вашей базы данных (например, `eur3` для Европы).

*   **Storage (Хранилище):**
    *   В левом меню выберите "Storage".
    *   Нажмите "Начать" (Get started).
    *   Следуйте инструкциям, используя настройки по умолчанию для правил безопасности (они также начнутся в тестовом режиме).
        **ПОЗЖЕ ОБЯЗАТЕЛЬНО ЗАМЕНИТЕ ЭТИ ПРАВИЛА!** Примеры также есть в `src/App.tsx`.

**3.3. Получите конфигурацию Firebase для вашего веб-приложения:**

*   В вашей Firebase консоли, в разделе "Обзор проекта" (Project Overview), нажмите на иконку веб-приложения `</>` (Добавить приложение -> Веб).
*   Введите название для вашего веб-приложения (например, "skr-baraholka-web").
*   Нажмите "Зарегистрировать приложение" (Register app).
*   Firebase предоставит вам объект `firebaseConfig`. Он будет выглядеть примерно так:
    ```javascript
    const firebaseConfig = {
      apiKey: "AIzaSyXXXXXXXXXXXXXXXXXXX",
      authDomain: "your-project-id.firebaseapp.com",
      projectId: "your-project-id",
      storageBucket: "your-project-id.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:XXXXXXXXXXXXXXXXXXXXXX"
    };
    ```
*   **Скопируйте этот объект `firebaseConfig`.**

**3.4. Обновите конфигурацию в коде вашего приложения:**

*   Откройте файл `src/firebase.ts` в вашем проекте.
*   Найдите объект `firebaseConfig` в этом файле.
*   **Замените значения-заполнители (`YOUR_API_KEY` и т.д.) на реальные значения из вашего объекта `firebaseConfig`, который вы скопировали на предыдущем шаге.**

    ```typescript
    // src/firebase.ts

    const firebaseConfig = {
      apiKey: "ВАШ_API_KEY_ЗДЕСЬ",
      authDomain: "ВАШ_AUTH_DOMAIN_ЗДЕСЬ",
      projectId: "ВАШ_PROJECT_ID_ЗДЕСЬ",
      storageBucket: "ВАШ_STORAGE_BUCKET_ЗДЕСЬ",
      messagingSenderId: "ВАШ_MESSAGING_SENDER_ID_ЗДЕСЬ",
      appId: "ВАШ_APP_ID_ЗДЕСЬ"
    };
    ```

### 4. Настройте правила безопасности Firebase (ОЧЕНЬ ВАЖНО!)

*   Вернитесь в Firebase Console.
*   **Для Firestore Database:**
    *   Перейдите в раздел "Firestore Database" -> вкладка "Rules" (Правила).
    *   Замените существующие правила на более строгие. **Примеры правил находятся в комментариях в файле `src/App.tsx`.** Адаптируйте их под свои нужды. Это критически важно для защиты ваших данных!
*   **Для Storage:**
    *   Перейдите в раздел "Storage" -> вкладка "Rules" (Правила).
    *   Аналогично, замените правила на более безопасные. Примеры также есть в `src/App.tsx`.

### 5. Создание администратора (опционально)

*   Чтобы протестировать админ-панель:
    1.  Зарегистрируйте нового пользователя через интерфейс вашего работающего приложения.
    2.  В Firebase Console перейдите в "Firestore Database".
    3.  Найдите коллекцию `users` и документ этого пользователя (ID документа будет совпадать с UID пользователя из раздела Authentication).
    4.  Добавьте в этот документ поле `isAdmin` (тип boolean) и установите его значение в `true`.

### 6. Запуск приложения для разработки

После настройки Firebase и установки зависимостей, вы можете запустить приложение локально:

```bash
npm start
# или
yarn start
```

Обычно приложение будет доступно по адресу `http://localhost:3000` или другому порту, указанному в консоли.

### 7. Сборка для продакшена

Для создания оптимизированной сборки приложения для развертывания:

```bash
npm run build
# или
yarn build
```

Собранные файлы появятся в папке `build` (или `dist`, в зависимости от конфигурации вашего проекта).

### 8. Развертывание на Vercel

1.  **Создайте аккаунт на [Vercel](https://vercel.com/)** (если у вас его еще нет) и подключите ваш Git-репозиторий (GitHub, GitLab, Bitbucket).
2.  **Настройте переменные окружения в Vercel:**
    *   При развертывании **не рекомендуется** хранить ключи API и другие части `firebaseConfig` прямо в коде. Используйте переменные окружения.
    *   В настройках вашего проекта на Vercel, перейдите в "Settings" -> "Environment Variables".
    *   Создайте переменные для каждой части вашего `firebaseConfig`. Имена переменных должны соответствовать тому, как они читаются в `src/firebase.ts`. Если вы используете Create React App, они должны начинаться с `REACT_APP_`. Для Vite - с `VITE_`.
        *   `REACT_APP_FIREBASE_API_KEY` (или `VITE_FIREBASE_API_KEY`)
        *   `REACT_APP_FIREBASE_AUTH_DOMAIN`
        *   `REACT_APP_FIREBASE_PROJECT_ID`
        *   `REACT_APP_FIREBASE_STORAGE_BUCKET`
        *   `REACT_APP_FIREBASE_MESSAGING_SENDER_ID`
        *   `REACT_APP_FIREBASE_APP_ID`
    *   В файле `src/firebase.ts` убедитесь, что конфигурация читается из `process.env`:
        ```typescript
        const firebaseConfig = {
          apiKey: process.env.REACT_APP_FIREBASE_API_KEY, // или process.env.VITE_FIREBASE_API_KEY
          authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
          // ... и так далее для всех ключей
        };
        ```
3.  **Настройки сборки в Vercel:**
    *   Vercel обычно автоматически определяет настройки для Create React App или Vite.
    *   **Framework Preset:** React (или Vite)
    *   **Build Command:** `npm run build` или `yarn build`
    *   **Output Directory:** `build` (для CRA) или `dist` (для Vite)
    *   **Install Command:** `npm install` или `yarn install`
4.  **Разверните проект.** Vercel автоматически будет выполнять сборку и развертывание при каждом push в основную ветку (или другую настроенную ветку).

## Структура проекта (основные компоненты)

*   `public/`: Статические файлы и `index.html`.
*   `src/`: Исходный код приложения.
    *   `components/`: Переиспользуемые UI компоненты.
    *   `contexts/`: React Contexts для управления состоянием (Theme, Auth, Listings).
    *   `firebase.ts`: Инициализация и конфигурация Firebase.
    *   `pages/`: Компоненты страниц приложения.
    *   `types.ts`: TypeScript типы и интерфейсы.
    *   `constants.ts`: Глобальные константы.
    *   `App.tsx`: Корневой компонент приложения с роутингом.
    *   `index.tsx`: Точка входа приложения, рендер React.

## Дальнейшие шаги и улучшения

*   **Более строгие правила безопасности Firebase:** Тщательно протестируйте и уточните правила безопасности для Firestore и Storage.
*   **Cloud Functions:** Для более сложной серверной логики (например, уведомления администраторам, обработка платежей, сложная агрегация данных) рассмотрите использование Firebase Cloud Functions.
*   **Система чатов между пользователями:** Требует дополнительной разработки коллекций в Firestore и логики на клиенте/сервере.
*   **Полноценное редактирование профиля пользователя.**
*   **Пагинация для списков объявлений.**
*   **Оптимизация производительности и загрузки изображений.**
*   **Тестирование.**

Удачи с вашим проектом!
